@using Core.Domain.DiscussionItems
@using Core.Domain.DiscussionItems.Models
@inject IDiscussionItemService DiscussionItemService

@code {

    [Parameter]
    public long MovieId { get; set; }

    private IEnumerable<Comment> _comments;

    protected override async Task OnInitializedAsync()
    {
        _comments = await DiscussionItemService.GetCommentsOnDiscussable(2, 1, 1);
    }

    public class Comments
    {
        public string AuthorUsername { get; set; }
        public string Text { get; set; }
        public List<Comment> Children { get; set; }
        public long NumberOfLikes { get; set; }
        public long NumberOfDislikes { get; set; }
    }

}

@foreach (var comment in _comments)
{
   <CommentItem Content="@comment"/>
}